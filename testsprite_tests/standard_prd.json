{
  "meta": {
    "project": "Local League Cricket",
    "date": "2025-11-04",
    "prepared_by": "Product + Engineering Team"
  },
  "product_overview": "Local League Cricket is a web application designed to organize and manage local cricket matches. It enables authenticated users to create matches, manage teams and players, perform live ball-by-ball scoring, and view match scorecards and leaderboards with real-time updates for participants and viewers.",
  "core_goals": [
    "Enable authenticated users to create, join, and manage cricket matches.",
    "Provide a streamlined and validated live-scoring experience for ball-by-ball cricket match events.",
    "Broadcast real-time updates of match events including overs, runs, and wickets to all viewers.",
    "Persist match data securely and expose APIs for scorecards and leaderboards.",
    "Support basic user account management flows such as registration, login, and logout."
  ],
  "key_features": [
    "User Authentication System with registration, login, logout, JWT tokens, and session management.",
    "Match Creation and Management including teams, players, overs configuration, and start workflows with toss and opening player selection.",
    "Live Scoring System supporting ball-by-ball event recording including runs, wickets and extras with validations and state management.",
    "Toss and Player Selection interface for match initialization.",
    "Scorecard and Match Display providing detailed innings stats, ball history, and player performance.",
    "Leaderboard System showing aggregated performance of teams and players across matches.",
    "User Dashboard for personalized match overview, recent matches, quick actions, and user statistics.",
    "Home and Landing Pages highlighting app features and live matches.",
    "Real-time Updates using Pusher for broadcasting match events and state changes.",
    "API Infrastructure with routes for auth, matches, leaderboards, and health checks.",
    "Database Layer with MongoDB models for users and matches.",
    "UI Component Library built with React and TailwindCSS to provide consistent UI/UX.",
    "Type System and Validation ensuring data integrity and business rules compliance.",
    "Testing Infrastructure with automated tests and debug utilities."
  ],
  "user_flow_summary": [
    "User Registration and Login: new users register with email/password, login to access the dashboard, logout to end sessions.",
    "Match Creation: user creates a match on dashboard, configures teams, players, and overs, then starts the match after toss and player selection.",
    "Live Scoring: scorer selects striker, non-striker, and bowler, records each ball event including runs, extras and wickets, with real-time updates to viewers.",
    "Viewing Matches: users visit match pages to see live scoring updates, scorecards, and recent over breakdowns.",
    "Post-Match: finalize match results, generate scorecards, and update leaderboards.",
    "Leaderboard Viewing: users access the leaderboard page to see top teams and players ranked by aggregated statistics."
  ],
  "validation_criteria": [
    "Authentication endpoints must securely register, authenticate, and logout users with JWT and password hashing.",
    "Match CRUD operations must enforce user authorization and validate input data according to cricket rules.",
    "Live scoring actions must validate ball legality, over progression, strike rotation, and prevent invalid state transitions.",
    "Real-time broadcasts on scoring events must occur with <500ms latency and reflect server-confirmed states.",
    "Scorecards and leaderboards must accurately aggregate and display match and player statistics.",
    "API responses must handle errors gracefully with appropriate HTTP status codes and error messages.",
    "UI components must provide feedback for success and failure via toasts and maintain accessibility standards.",
    "Server must log errors and provide health endpoint for diagnostics.",
    "Security controls include JWT secret rotation, rate limiting on auth, input sanitization and no sensitive data in client bundles.",
    "Performance goals include sub-150ms server processing for scoring and responsive UI updates.",
    "Unit tests and integration tests must cover core features and validate cricket-specific business rules."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Next.js 14.2.33",
      "Node.js",
      "MongoDB",
      "Mongoose ODM",
      "TailwindCSS",
      "JWT Authentication",
      "bcryptjs",
      "Pusher Real-time",
      "React Hot Toast",
      "Lucide React Icons",
      "ESLint",
      "PostCSS"
    ],
    "features": [
      {
        "name": "User Authentication System",
        "description": "Complete user registration, login, logout with JWT tokens, password hashing, and session management including middleware protection",
        "files": [
          "app/api/auth/register/route.ts",
          "app/api/auth/login/route.ts",
          "app/(auth)/login/page.tsx",
          "app/(auth)/register/page.tsx",
          "lib/auth.ts",
          "hooks/useAuth.ts",
          "middleware.ts"
        ]
      },
      {
        "name": "Match Creation and Management",
        "description": "Complete match lifecycle management including creation, viewing, starting, and managing cricket matches with team and player configurations",
        "files": [
          "app/api/matches/route.ts",
          "app/api/matches/[id]/route.ts",
          "app/matches/create/page.tsx",
          "app/matches/[id]/page.tsx",
          "models/Match.ts",
          "components/dashboard/CreateMatchForm.tsx"
        ]
      },
      {
        "name": "Live Scoring System",
        "description": "Comprehensive real-time cricket match scoring with ball-by-ball events, over management, wicket tracking, innings handling, and score persistence",
        "files": [
          "app/matches/[id]/score/page.tsx",
          "app/matches/[id]/score/components/ScoringInterface.tsx",
          "app/matches/[id]/score/components/ScoreDisplay.tsx",
          "app/matches/[id]/score/components/CurrentOver.tsx",
          "app/api/matches/[id]/score/route.ts",
          "hooks/useMatchScoring.ts",
          "utils/scoringValidations.ts"
        ]
      },
      {
        "name": "Toss and Player Selection",
        "description": "Match initialization workflow including toss decision interface and comprehensive player selection for opening batsmen and bowlers",
        "files": [
          "app/matches/[id]/score/components/TossForm.tsx",
          "app/matches/[id]/score/components/PlayerSelectionForm.tsx",
          "app/matches/[id]/score/components/BatsmanSelectionForm.tsx"
        ]
      },
      {
        "name": "Scorecard and Match Display",
        "description": "Comprehensive match scorecard view showing detailed statistics, ball-by-ball history, team scores, and player performance",
        "files": [
          "app/matches/[id]/scorecard/page.tsx",
          "app/matches/[id]/live/page.tsx",
          "components/sections/ScoreCard.tsx"
        ]
      },
      {
        "name": "Leaderboard System",
        "description": "Display team and player leaderboards with aggregated statistics across all matches including ranking and performance metrics",
        "files": [
          "app/api/leaderboard/route.ts",
          "app/leaderboard/page.tsx",
          "components/Leaderboard/LeaderboardTable.tsx",
          "components/Leaderboard/PlayerStats.tsx"
        ]
      },
      {
        "name": "User Dashboard",
        "description": "Personalized user dashboard displaying match overview, recent matches, quick actions, and user statistics",
        "files": [
          "app/dashboard/page.tsx",
          "components/dashboard/MatchCard.tsx",
          "components/dashboard/QuickActions.tsx",
          "components/dashboard/RecentMatches.tsx",
          "components/dashboard/DashboardStats.tsx"
        ]
      },
      {
        "name": "Home and Landing Pages",
        "description": "Marketing landing page with hero section, feature showcases, live match displays, and call-to-action components",
        "files": [
          "app/page.tsx",
          "app/home/page.tsx",
          "components/home/Hero.tsx",
          "components/home/LiveMatches.tsx",
          "components/sections/Hero.tsx",
          "components/sections/Features.tsx",
          "components/sections/CallToAction.tsx"
        ]
      },
      {
        "name": "Real-time Updates and Broadcasting",
        "description": "Live match updates broadcasting using Pusher for real-time communication between scorers and viewers",
        "files": [
          "lib/pusher.ts",
          "lib/pusher-client.ts",
          "app/api/matches/[id]/broadcast/route.ts"
        ]
      },
      {
        "name": "Database Layer",
        "description": "MongoDB data models, database connection management, and schema definitions for users, matches, and teams",
        "files": [
          "models/User.ts",
          "models/Match.ts",
          "models/index.ts",
          "lib/db.ts"
        ]
      },
      {
        "name": "API Infrastructure",
        "description": "API client helpers, utilities, debugging tools, health checks, and centralized API management",
        "files": [
          "lib/api-client.ts",
          "utils/apiHelpers.ts",
          "utils/debugLogger.ts",
          "app/api/health/route.ts",
          "app/api/test/route.ts"
        ]
      },
      {
        "name": "UI Component Library",
        "description": "Reusable UI components built with React and TailwindCSS including cards, buttons, animations, and layout components",
        "files": [
          "components/ui/card.tsx",
          "components/ui/button.tsx",
          "components/ui/input.tsx",
          "components/ui/dialog.tsx",
          "components/animations/ScrollAnimation.tsx"
        ]
      },
      {
        "name": "Type System and Validation",
        "description": "Comprehensive TypeScript type definitions for matches, users, API contracts, and data validation",
        "files": [
          "types/index.ts",
          "types/match.ts",
          "utils/scoringValidations.ts"
        ]
      },
      {
        "name": "Testing Infrastructure",
        "description": "Automated testing setup with TestSprite integration, test utilities, and comprehensive test coverage",
        "files": [
          "testsprite_tests/testsprite_frontend_test_plan.json",
          "testsprite_tests/standard_prd.json",
          "scripts/seedTestUsers.js"
        ]
      }
    ]
  }
}
